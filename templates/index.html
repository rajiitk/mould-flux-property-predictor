<!DOCTYPE html>
<html>
<head>
    <title>Mould Flux Tool</title>
</head>
<body>
    <h2>Mould Flux Property Predictor</h2>

    <form method="post">
        <label>CaO (%):</label>
        <input type="number" step="0.1" name="CaO" required><br><br>

        <label>SiO2 (%):</label>
        <input type="number" step="0.1" name="SiO2" required><br><br>

        <label>Al2O3 (%):</label>
        <input type="number" step="0.1" name="Al2O3" required><br><br>

        <label>Na2O (%):</label>
        <input type="number" step="0.1" name="Na2O" value="0"><br><br>

        <label>B2O3 (%):</label>
        <input type="number" step="0.1" name="B2O3" value="0"><br><br>

        <label>Li2O (%):</label>
        <input type="number" step="0.1" name="Li2O" value="0"><br><br>

        <label>MgO (%):</label>
        <input type="number" step="0.1" name="MgO" value="0"><br><br>

        <label>CaF2 (%):</label>
        <input type="number" step="0.1" name="CaF2" value="0"><br><br>

        <label>Temperature (K):</label>
        <input type="number" name="temp" required><br><br>

        <button type="submit">Calculate</button>
    </form>

    {% if result %}
        <hr>
        <h3>Results</h3>

        {% if result.error %}
            <p style="color:red;">Error: {{ result.error }}</p>
        {% else %}
            <p><b>Basicity (CaO/SiO2):</b> {{ result.basicity }}</p>
            <p><b>Viscosity (model, Pa·s):</b> {{ result.viscosity_raw }}</p>
            <p><b>Viscosity (industrial, Pa·s):</b> {{ result.viscosity }}</p>
            <p><b>Al2O3/SiO2:</b> {{ result.alumina_ratio }}</p>

            <h4>Combined Viscosity Plot</h4>
            <img src="{{ url_for('static', filename='viscosity_combined.png') }}"
                 width="500">

            <h4>Model Viscosity (Log Scale)</h4>
            <img src="{{ url_for('static', filename='viscosity_model_log.png') }}"
                 width="500">

            <h4>Industrial Viscosity</h4>
            <img src="{{ url_for('static', filename='viscosity_industrial.png') }}"
                 width="500">
        {% endif %}
    {% endif %}
</body>
</html>
